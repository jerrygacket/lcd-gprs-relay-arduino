# lcd-gprs-relay-arduino
lcd keypad gprs sim900 relay arduino

Управление двумя реле с контролем их включения и включения, контролем аналогового сигнала датчика уровня жидкости. Вывод этих данных на модуль lcd keypad 16x2. Отправка данных на срвер через GPRS с помощью модуля SIM900. Включение сирены в случае критически низкого уровня жидкости.

В модулях srd-05vdc-sl-c зеленый светодиод (контроль подачи управляющего сигнала) заменен на опттопару PS2501. 3 контакт оптопары подключен к земле, 4 - к входу ардуино для контроля работы реле.

В следующей версии устройства необходимо подключить оптопару к линии питания нагрузки.

Компоненты:

 -- Arduino uno R3
 
 -- Модуль GSM/GPRS модем SIM900 Shield
 
 -- Модуль LCD1602 Keypad Shield
 
 -- 2 Модуля Arduino Relay module srd-05vdc-sl-c
 
 -- 2 оптопары (PS2501)
 
 -- пъезо пищалка

Описание работы программы:

При включении происходит инициализация входов-выходов и модулей. На сервер отправляется GET-запрос с информацией о состоянии реле и уровня ктализатора.

Включаются реле насоса и форсунки.

В основном цикле выполняется:

 -- раз в секунду вывод данных о состоянии реле и уровня жидкости на дисплей, проверка уровня жидкости
 
 -- раз в 25 секунд отправка данных о состоянии реле и уровня жидкости на сервер через модуль GSM/GPRS модем SIM900 Shield
 
 -- определение нажатых кнопок на модуле LCD1602 Keypad Shield
 
 Если уровень жидкости ниже заданного, то происходит выключение реле насоса и форсунки, включение сирены, отправка данных об аварии на сервер. Выключить сирену можно кнопкой ВПРАВО. Но включить насос или форсунку нельзя. Необходимо долить жидкость и перезагрузить устройство по питанию (выкл./вкл.).
